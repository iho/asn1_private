// Generated by ASN1.ERP.UNO Compiler -- Rust emitter
use std::sync::Arc;
use rust_asn1::{
    asn1::ASN1Node,
    asn1_types::*,
    der::{self, DERParseable, DERSerializable, Serializer},
    errors::ASN1Error,
};
use super::*;

#[derive(Clone, Debug)]
pub enum CHATProtocol {
    Register(crate::CHATRegister),
    Auth(crate::CHATAuth),
    Feature(crate::CHATFeature),
    Service(crate::CHATService),
    Message(crate::CHATMessage),
    Profile(crate::CHATProfile),
    Room(crate::CHATRoom),
    Member(crate::CHATMember),
    Search(crate::CHATSearch),
    File(crate::CHATFileDesc),
    Typing(crate::CHATTyping),
    Friend(crate::CHATFriend),
    Presence(crate::CHATPresence),
    History(crate::CHATHistory),
    Roster(crate::CHATRoster),
}

impl DERParseable for CHATProtocol {
    fn from_der_node(node: ASN1Node) -> Result<Self, ASN1Error> {
        match (node.identifier.tag_number, node.identifier.tag_class) {
            (227, TagClass::ContextSpecific) => Ok(Self::Register(crate::CHATRegister::from_der_node(node)?)),
            (228, TagClass::ContextSpecific) => Ok(Self::Auth(crate::CHATAuth::from_der_node(node)?)),
            (229, TagClass::ContextSpecific) => Ok(Self::Feature(crate::CHATFeature::from_der_node(node)?)),
            (230, TagClass::ContextSpecific) => Ok(Self::Service(crate::CHATService::from_der_node(node)?)),
            (231, TagClass::ContextSpecific) => Ok(Self::Message(crate::CHATMessage::from_der_node(node)?)),
            (232, TagClass::ContextSpecific) => Ok(Self::Profile(crate::CHATProfile::from_der_node(node)?)),
            (233, TagClass::ContextSpecific) => Ok(Self::Room(crate::CHATRoom::from_der_node(node)?)),
            (234, TagClass::ContextSpecific) => Ok(Self::Member(crate::CHATMember::from_der_node(node)?)),
            (235, TagClass::ContextSpecific) => Ok(Self::Search(crate::CHATSearch::from_der_node(node)?)),
            (236, TagClass::ContextSpecific) => Ok(Self::File(crate::CHATFileDesc::from_der_node(node)?)),
            (237, TagClass::ContextSpecific) => Ok(Self::Typing(crate::CHATTyping::from_der_node(node)?)),
            (238, TagClass::ContextSpecific) => Ok(Self::Friend(crate::CHATFriend::from_der_node(node)?)),
            (239, TagClass::ContextSpecific) => Ok(Self::Presence(crate::CHATPresence::from_der_node(node)?)),
            (240, TagClass::ContextSpecific) => Ok(Self::History(crate::CHATHistory::from_der_node(node)?)),
            (241, TagClass::ContextSpecific) => Ok(Self::Roster(crate::CHATRoster::from_der_node(node)?)),
            _ => Err(ASN1Error::new(
                rust_asn1::errors::ErrorCode::UnexpectedFieldType,
                format!("{}", node.identifier),
                file!().to_string(),
                line!(),
            )),
        }
    }
}

impl DERSerializable for CHATProtocol {
    fn serialize(&self, _serializer: &mut Serializer) -> Result<(), ASN1Error> {
        Err(ASN1Error::new(
            rust_asn1::errors::ErrorCode::UnsupportedFieldLength,
            "Serialization is not implemented by the generator yet.".to_string(),
            file!().to_string(),
            line!(),
        ))
    }
}

